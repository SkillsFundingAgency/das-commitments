@using SFA.DAS.Commitments.Support.SubSite.Models
@using SFA.DAS.Commitments.Support.SubSite.Extensions
@using System.Collections.Generic;
@using System.Linq;

@model CommitmentDetailViewModel
@{
    ViewBag.Title = "CommitmentDetails";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="grid-row">
    <div class="column-two-thirds">
        <h1 class="heading-xlarge" id="commitmentsHeader">View cohort</h1>
    </div>
</div>

@if (Model.CommitmentSummary != null)
{
    <div class="grid-row">
        <div class="column-two-thirds">
            <table class="responsive">
                <tbody>
                    <tr>
                        <td>Cohort reference:</td>
                        <td>@Model.CommitmentSummary.CohortReference</td>
                    </tr>
                    <tr>
                        <td>Employers account name:</td>
                        <td>@Model.CommitmentSummary.EmployerName</td>
                    </tr>
                    <tr>
                        <td>Provider name:</td>
                        <td>@Model.CommitmentSummary.ProviderName</td>
                    </tr>
                    <tr>
                        <td>UKPRN:</td>
                        <td>@Model.CommitmentSummary.ProviderUkprn</td>
                    </tr>
                    <tr>
                        <td>Cohort status:</td>
                        <td>@Model.CommitmentSummary.CohortStatusText</td>
                    </tr>
                    <tr>
                        <td>Number of apprentices:</td>
                        <td>
                            @{
                                var count = Model.CommitmentApprenticeships?.Count() ?? 0;
                            }
                            @count
                        </td>
                    </tr>

                </tbody>
            </table>

            <br /> <br />
        </div>
    </div>
}

@if (Model.CommitmentApprenticeships != null && Model.CommitmentApprenticeships.Any())
{
    <div class="grid-row">

        <div class="column-full">
            <hr >
            <table class="responsive">
                <thead>
                    <tr>
                        <th scope="col" class="">Name</th>
                        <th scope="col" class="">ULN</th>
                        <th scope="col" class="">Date Of Birth</th>
                        <th scope="col" class="">Training dates</th>
                        <th scope="col" class="">Status</th>
                        <th scope="col" class=""></th>
                    </tr>
                </thead>
                <tbody>

                    @foreach (var apprenticeship in Model.CommitmentApprenticeships)
                    {
                        <tr>
                            <td data-label="Name">@apprenticeship.ApprenticeName</td>
                            <td data-label0="UKPRN">@apprenticeship.ULN</td>
                            <td data-label="Organisation">@apprenticeship.DateOfBirth.ToGdsFormatWithSpaceSeperator()</td>
                            <td data-label="Training dates">@apprenticeship.TrainingDates</td>
                            <td data-label="Status">@apprenticeship.PaymentStatus</td>
                            <td scope="col" class=""> <a href="@Url.RouteUrl("ApprenticeshipDetails", new { hashedApprenticeshipId = apprenticeship.ApprenticeshipHashId, hashedAccountId = apprenticeship.HashedAccountId})"> View</a>  </td>
                        </tr>

                    }
                </tbody>
            </table>



        </div>

    </div>


}



